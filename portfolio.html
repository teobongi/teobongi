<!DOCTYPE html>
<html>
<head>
    <title>Portfolio</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .portfolio-container { max-width: 600px; margin: 0 auto; }
        h1 { text-align: center; }
        ul { list-style-type: none; padding: 0; }
        li { margin: 10px 0; }
    </style>
</head>
<body>
    <div class="portfolio-container">
        <h1 id="nome"></h1>
        <h2>Portfolio</h2>
        <ul id="lavori"></ul>
    </div>

    <script>
        function caricaPortfolio(PTfile) {
            const xhr = new XMLHttpRequest();
            xhr.open('GET', PTfile, true);
            xhr.onload = function() {
                if (xhr.status === 200) {
                    try {
                        const portfolioData = JSON.parse(xhr.responseText);
                        mostraPortfolio(portfolioData);
                    } catch (error) {
                        console.error("Errore nel parsing del JSON:", error);
                        alert("Errore nel formato del file JSON.");
                    }
                } else {
                    alert('Errore nel caricamento del portfolio.');
                }
            };
            xhr.onerror = function() {
                alert('Errore di rete durante il caricamento del portfolio.');
            };
            xhr.send();
        }

        function mostraPortfolio(data) {
            document.getElementById("nome").innerText = `${data.nome} ${data.cognome}`;
            const lavoriList = document.getElementById("lavori");

            data.lavori.forEach(lavoro => {
                const li = document.createElement("li");
                li.innerHTML = `
                    <strong>${lavoro.titolo}</strong><br>
                    ${lavoro.descrizione}<br>
                    <a href="${lavoro.link}" target="_blank">Visita</a>
                `;
                lavoriList.appendChild(li);
            });
        }
         const portfolioFile = localStorage.getItem("portfolio");
         if (portfolioFile) {
            caricaPortfolio(portfolioFile);
        } else {
            alert('Portfolio non trovato.');
        }
    </script>
</body>
</html>
